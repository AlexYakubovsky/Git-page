(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25e5e660"],{"275e":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selected=e.target.multiple?n:n[0]}}},t._l(t.operators,(function(e){return n("option",{key:e.key,domProps:{value:e.key}},[t._v(" "+t._s(e.name)+" ")])})),0)])},r=[],a={name:"currencySelector",props:["value"],data:function(){return{operators:[{key:"eur",name:"EUR"},{key:"gbp",name:"GBP"},{key:"usd",name:"USD"},{key:"rub",name:"RUB"}]}},computed:{selected:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},i=a,c=n("2877"),o=Object(c["a"])(i,s,r,!1,null,null,null);e["a"]=o.exports},"362d":function(t,e,n){},5298:function(t,e,n){},"7c90":function(t,e,n){"use strict";var s=n("362d"),r=n.n(s);r.a},"7f1d":function(t,e,n){"use strict";var s=n("5298"),r=n.n(s);r.a},"93d9":function(t,e,n){},a15b:function(t,e,n){"use strict";var s=n("23e7"),r=n("44ad"),a=n("fc6a"),i=n("a640"),c=[].join,o=r!=Object,u=i("join",",");s({target:"Array",proto:!0,forced:o||!u},{join:function(t){return c.call(a(this),void 0===t?",":t)}})},a83b:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("header",[t._m(0),s("div",{staticClass:"middle"},[s("div",{staticClass:"row"},[s("button",{staticClass:"row__button",class:{active:"external"==t.tFilter.type},on:{click:function(e){t.tFilter.type="external",t.currentTab="tHistory"}}},[t._v("External")]),s("button",{staticClass:"row__button",class:{active:"incoming"==t.tFilter.type},on:{click:function(e){t.tFilter.type="incoming",t.currentTab="tHistory"}}},[t._v("Incoming")])]),"external"==t.tFilter.type?s("div",{staticClass:"row"},[s("button",{staticClass:"row__button",class:{active:"approved"==t.tFilter.status},on:{click:function(e){t.tFilter.status="approved",t.currentTab="tHistory"}}},[t._v("Approved")]),s("button",{staticClass:"row__button",class:{active:"executed"==t.tFilter.status},on:{click:function(e){t.tFilter.status="executed",t.currentTab="tHistory"}}},[t._v("Executed")])]):t._e(),"incoming"==t.tFilter.type?s("div",{staticClass:"row"},[s("button",{staticClass:"row__button",class:{active:"approved"==t.tFilter.status},on:{click:function(e){t.tFilter.status="approved",t.currentTab="tHistory"}}},[t._v("Approved")]),s("button",{staticClass:"row__button",class:{active:"pending"==t.tFilter.status},on:{click:function(e){t.tFilter.status="pending",t.currentTab="tHistory"}}},[t._v("Pending")]),s("button",{staticClass:"rejected",class:{active:"rejected"==t.tFilter.status},on:{click:function(e){t.tFilter.status="rejected"}}},[t._v("Rejected")])]):t._e()]),s("div",{staticClass:"right"},[s("div",{staticClass:"user"},[s("img",{attrs:{src:n("6dfd"),alt:"",width:"45",height:"45"}}),s("span",{on:{click:function(e){return t.logOut()}}},[t._v("Welcome Admin 3")])])])]),s("section",["incoming"==t.tFilter.type&&"incomingExternal"!=t.currentTab?s("button",{staticClass:"row__button create",on:{click:function(e){t.currentTab="incomingExternal"}}},[t._v("+ Create incoming external transaction")]):t._e(),s(t.currentTabComponent,{tag:"component",attrs:{transactions:t.transactions,tFilter:t.tFilter,users:t.allUsers},on:{refresh:function(e){return t.update()}}})],1),t._m(1)])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"left"},[s("img",{attrs:{src:n("67e7"),alt:"",width:"120",height:"120"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"footer"},[n("div",{staticClass:"copyright"},[n("span",[t._v("© 2020 Copyright. All Rights Reserved. Internet banking software provided by Sterling Payment Services (HK)")])])])}],a=(n("96cf"),n("1da1")),i=n("5530"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper_1"},[s("table",[t._m(0),s("tbody",t._l(t.filteredTransactions,(function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(t._f("dateFormat")(e.transactionDetails.valueDate)))]),s("td",[t._v(t._s(e.payer.clientName))]),s("td",{staticClass:"blue"},[t._v(t._s(t._f("fixed")(e.transactionDetails.amount))+" "+t._s(t._f("getCurrencySign")(e.transactionDetails.currency)))]),s("td",[t._v(t._s(t._f("upperCase")(e.transactionDetails.currency)))]),s("td",[t._v(t._s(e.beneficiaryClient.name))]),s("td",[t._v(t._s(e.beneficiaryClient.country))]),s("td",[t._v(t._s(e.beneficiaryBank.swift))]),s("td",["approved"==e.status?s("img",{staticClass:"icon-button",attrs:{src:n("aa33"),alt:"approve",width:"25",height:"25"},on:{click:function(n){return t.execute(e.transactionDetails.id,"executed")}}}):t._e(),s("img",{staticClass:"icon-button",attrs:{src:n("7364"),alt:"preview",width:"27",height:"25"},on:{click:function(n){return t.preview(e.transactionDetails.id)}}})])])})),0)])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("Date:")]),n("th",[t._v("ClientName:")]),n("th",[t._v("Amount:")]),n("th",[t._v("Currency:")]),n("th",[t._v("Reciever name:")]),n("th",[t._v("Reciever country:")]),n("th",[t._v("Reciever bank SWIFT:")]),n("th")])}],u=(n("4de4"),n("fb6a"),n("b680"),n("d3b7"),n("ac1f"),n("25f0"),n("5319"),{name:"t-history",data:function(){return{}},props:{transactions:Array,userName:Object,users:Array,tFilter:Object},methods:{getCurrencySign:function(t){var e={eur:"€",gbp:"£",usd:"$",rub:"₽"},n=e[t];return n},execute:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log(t+" "+e),r={id:t,status:e},n.$emit("refresh"),s.next=5,fetch("http://localhost:3000/updatetransaction",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)}).then((function(t){console.log(t)}));case 5:s.sent;case 6:case"end":return s.stop()}}),s)})))()}},computed:{filteredTransactions:function(){var t=this.tFilter;if(t.status){console.log(t.status);var e=this.transactions;return e=e.filter((function(e){return e.status==t.status&&e.type==t.type})),e}}},filters:{upperCase:function(t){return t?t.toUpperCase():""},dateFormat:function(t){return t?(t=t.slice(0,10).replace(/-/g,"."),t):""},fixed:function(t){return t?(t=t.toFixed(2),t):""},formatAccount:function(t){if(!t)return"";t.toString(),t="0"+t;var e=t.substr(0,3);return e+=" "+t.substr(3,2),e+=" "+t.substr(5,3),e+=" "+t.substr(8,4),e},getCurrencySign:function(t){var e={eur:"€",gbp:"£",usd:"$",rub:"₽"},n=e[t];return n}}}),l=u,d=(n("b876"),n("2877")),p=Object(d["a"])(l,c,o,!1,null,"fa27d1b0",null),v=p.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"wrapper_data"},[n("div",{staticClass:"column"},[t._m(0),n("fieldset",[n("legend",[t._v("Payment description:")]),n("div",{staticClass:"description"},[t._m(1),n("div",{staticClass:"description__item"},[n("label",[t._v("Currency:")]),n("div",{staticClass:"currency-selector"},[n("currencySelector",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)]),t._m(2),n("div",{staticClass:"description__item"},[n("label",[t._v("Value Date:")]),n("div",[n("span",{staticClass:"form-like"},[t._v(t._s(t._f("formatDate")(t.transaction.transactionDetails.valueDate)))])])])]),n("div",{staticClass:"description__item"},[n("label",[t._v("Payment description:")]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.transaction.paymentDescription.referenceMsg,expression:"transaction.paymentDescription.referenceMsg",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:t.transaction.paymentDescription.referenceMsg},on:{input:function(e){e.target.composing||t.$set(t.transaction.paymentDescription,"referenceMsg",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])])]),t._m(3)]),n("p",{staticClass:"confirm"},[n("button",{on:{click:t.makePayment}},[t._v("SEND")])])])])},m=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fieldset",[n("legend",[t._v("Payer:")]),n("div",{staticClass:"description"},[n("div",{staticClass:"description__item"},[n("label",[t._v("ID:")]),n("div",[n("span",{staticClass:"form-like"},[t._v("1593")])])]),n("div",{staticClass:"description__item"},[n("label",[t._v("Name:")]),n("div",[n("input",{attrs:{type:"text"}})])]),n("div",{staticClass:"description__item"},[n("label",[t._v("Address:")]),n("div",[n("span",{staticClass:"form-like"},[t._v("Moscow")])])])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"description__item"},[n("label",[t._v("Bank account №:")]),n("div",[n("input",{attrs:{type:"text"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"description__item"},[n("label",[t._v("Amount:")]),n("div",[n("input",{staticClass:"amount-input",attrs:{type:"text",placeholder:"000000"}}),n("div",{staticClass:"amount-items"},[n("span",[t._v("total: "),n("span",[t._v("4343")]),t._v(" $")]),n("span",[t._v("available: "),n("span",[t._v("333")]),t._v(" $")]),n("span",[t._v("blocked: "),n("span",[t._v("100")]),t._v(" $")])])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column"},[n("fieldset",[n("legend",[t._v("Sender:")]),n("div",{staticClass:"description"},[n("div",{staticClass:"description__item"},[n("label",[t._v("Name:")]),n("div",[n("input",{attrs:{type:"text"}})])]),n("div",{staticClass:"description__item"},[n("label",[t._v("Other bank account №:")]),n("div",[n("input",{attrs:{type:"text"}})])]),n("div",{staticClass:"description__item"},[n("label",[t._v("Client's address:")]),n("div",[n("input",{attrs:{type:"text"}})])])])]),n("fieldset",[n("legend",[t._v("Sender:")]),n("div",{staticClass:"description"},[n("div",{staticClass:"description__item"},[n("label",[t._v("SWIFT:")]),n("div",[n("input",{attrs:{type:"text"}})])]),n("div",{staticClass:"description__item"},[n("label",[t._v("Bank name:")]),n("div",[n("input",{attrs:{type:"text"}})])]),n("div",{staticClass:"description__item"},[n("label",[t._v("Country:")]),n("div",[n("input",{attrs:{type:"text"}})])])])])])}],_=(n("a15b"),n("275e")),b={name:"incomingExternal",components:{currencySelector:_["a"]},data:function(){return{selected:"eur",selectedAccount:this.getAccount,sellAmount:null,buyAmount:null,buySelected:"eur",sellSelected:"usd",transaction:{type:"internal",status:"pending",payer:{clientName:"Ivan Ivanov",clientAdress:"Moscow"},transactionDetails:{id:this.newID(),bankAccount:null,currency:null,amount:null,valueDate:new Date},beneficiaryBank:{swift:"",name:"Sberbank",address:"Moscow",country:"Russia"},beneficiaryClient:{type:"none",name:"Vasya",address:"London",country:"Great Britain",iban:"GB29 NWBK 6016 1331 9268 19"},paymentDescription:{referenceMsg:"",msg2:"",msg3:"",msg4:""}}}},props:{currency:Object,user:Object,transactions:Array},filters:{formatAccount:function(t){t="0"+t.toString();var e=t.substr(0,3);return e+=" "+t.substr(3,2),e+=" "+t.substr(5,3),e+=" "+t.substr(8,4),e},formatTransactionID:function(t){for(var e=t.toString(),n="",s=0;s<19-e.length;s++)n+="0";var r=0,a=[e.slice(0,r),n,e.slice(r)].join("");return a},formatDate:function(t){return t?(t=t.toString(),t=t.slice(3,16).replace(/-/g,"."),t):""}},methods:{checkValue:function(t,e,n){console.log(e,n),e>n&&(console.log(this.currencySelector),this.transaction.transactionDetails.amount=this.user.balance.total[this.selected]-this.user.balance.blocked[this.selected],this.transaction.transactionDetails.amount.toFixed(2))},makePayment:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.transaction,n.transactionDetails.currency=t.selectedCurrency,n.transactionDetails.bankAccount=t.getAccount,e.next=5,fetch("http://localhost:3000/makepayment",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 5:e.sent;case 6:case"end":return e.stop()}}),e)})))()},newID:function(){if(0!==this.transactions.length){var t=this.transactions[this.transactions.length-1].transactionDetails.id;return t+1}return 1},close:function(){}},computed:{getBalance:function(){var t={total:this.user.balance.total[this.selected].toFixed(2),available:this.user.balance.total[this.selected]-this.user.balance.blocked[this.selected].toFixed(2),blocked:this.user.balance.blocked[this.selected].toFixed(2)};return t},selectedCurrency:function(){return this.selected},getAccount:function(){var t=this.selected;if(t){var e={eur:this.user.accounts.eur,gbp:this.user.accounts.gbp,usd:this.user.accounts.usd,rub:this.user.accounts.rub},n=e[t];return this.$emit("recieveAccount",n),n}},getCurrencySign:function(){var t={eur:"€",gbp:"£",usd:"$",rub:"₽"},e=t[this.selected];return e},getRate:function(){return this.currency[this.sellSelected][this.buySelected]}}},h=b,g=(n("7c90"),Object(d["a"])(h,f,m,!1,null,"0ddd72e4",null)),y=g.exports,C=n("2f62"),A={name:"admin3",components:{tHistory:v,incomingExternal:y},data:function(){return{transactions:[],currentTab:"tHistory",tFilter:{status:"approved",type:"external"}}},methods:Object(i["a"])(Object(i["a"])({update:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTransactions().then((function(){console.log("transactions "),t.transactions=t.allTransactions,t.loading=!1})).catch((function(e){t.err=e,console.log(e)}));case 2:return e.next=4,t.fetchUsers().then((function(){t.user=t.allUsers[0]})).catch((function(e){t.err=e,console.log(e)}));case 4:case"end":return e.stop()}}),e)})))()}},Object(C["b"])(["fetchUsers","fetchTransactions"])),{},{logOut:function(){localStorage.clear(),this.$router.push("/login")}}),computed:Object(i["a"])(Object(i["a"])({},Object(C["c"])(["allUsers","allTransactions"])),{},{currentTabComponent:function(){return console.log(this.currentTab),this.currentTab}}),mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTransactions().then((function(){console.log("transactions "),t.transactions=t.allTransactions,t.loading=!1})).catch((function(e){t.err=e,console.log(e)}));case 2:return e.next=4,t.fetchUsers().then((function(){t.user=t.allUsers[0]})).catch((function(e){t.err=e,console.log(e)}));case 4:case"end":return e.stop()}}),e)})))()}},k=A,w=(n("7f1d"),Object(d["a"])(k,s,r,!1,null,"fe879824",null));e["default"]=w.exports},aa33:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKvSURBVHgBnZZdctowEMd35dAh05mWI/gI7g1EnoC+QNP0leQEtCcInKDlBMBzQ0xeGmb6gHqCuieob1Ay00k9E6rNymBHfBjs7AtCWu1PWq3+MkIOk76swEPJBXC8tBMhhKMoUC01PzQf9wb/WpMo8JKbLhHMASlYTasgUQUQJf9RhDRU76ajQhDp11zUOCCODBpGUIomu1Yc71CXmwjxQoAEVVVrGh6EyOu3bSTdJQ19dXb7BXKaHNc/IkKH531S728nmRB5VW+y42cS2FKtbwEUtFUGZpy+rp0+3HLI2HJ+UMPj8/IZlMYRKc0ATIqeCTCLNL8mA3yUfXOmyVgMkePaeexQ4AxsOxk3BmaRKeiU49CyOlMIErZNHuEZZgAEdM5N1waRptGq/EFIv8n1DhLuohsoaBZg20rlCcd15UBWBCwivsWk1MXhm3sAENpFo1qTOd+xObwsuYJzZ27z3a5ASU7X+vgCVsf12T5AYuzzCxzHW1YXwp9dK+WczuR1rW0D8P/xzDQPAWw72tVpp4KLYnjiN1wN9/0YgOBZSw3I+VfNEkmB+Fqzk4CSCDiQZw9q0D/s/1wpXdTHP4sAYhcC1jYIOV0vQkZVTBUkg+p0OmRpecNNO4BbBJBW7d8oEKsqCOFVuWk7xTdXYHUDlAsQm46aSdWK5baox3Ld3vTbAuUFgKklvCSE4Vpn9ao+M3INO7fe8Fih88u+X+9wmf9+AqYDrMLEIrlYtNSH74Vlfi3OhpqnKmw64rQ5R36iP8UBLPMGQPxwWfdG2E5xVbGD2VFW6rIB9Q5qfkeAentfxqcJyy2bdqzOGN1kvvEP/MY7rOLme8CBi1xv/FoQfmeQoJ18lbDzXAPGMH79PJ5d4eAhV11PnU1VVpy9kLUVL8qeEdO0k5UC4D7MU86P3UmXUAqn71kAAAAASUVORK5CYII="},b876:function(t,e,n){"use strict";var s=n("93d9"),r=n.n(s);r.a}}]);
//# sourceMappingURL=chunk-25e5e660.424795fa.js.map